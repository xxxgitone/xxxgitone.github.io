<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="CSS,CSS3," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="《css揭秘》学习笔记系列，记录和分享各种实用技巧，共同进步。源代码可访问仓库地址 视觉效果1. 单侧投影1.1 单侧投影大多数人使用box-shadow的方法是，制定三个长度和一个颜色值。 1box-shadow: 2px 3px 4px rgba(0, 0, 0, .5);   box-shadow第一个长度表示水平方向投影，第二个为垂直方向投影，第三个为模糊半径。  投影绘制步骤：  以该元">
<meta name="keywords" content="CSS,CSS3">
<meta property="og:type" content="article">
<meta property="og:title" content="CSS技巧（三）：视觉效果">
<meta property="og:url" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/index.html">
<meta property="og:site_name" content="Xu•thus Blog">
<meta property="og:description" content="《css揭秘》学习笔记系列，记录和分享各种实用技巧，共同进步。源代码可访问仓库地址 视觉效果1. 单侧投影1.1 单侧投影大多数人使用box-shadow的方法是，制定三个长度和一个颜色值。 1box-shadow: 2px 3px 4px rgba(0, 0, 0, .5);   box-shadow第一个长度表示水平方向投影，第二个为垂直方向投影，第三个为模糊半径。  投影绘制步骤：  以该元">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/01-1.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/01-2.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/01-3.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/01-4.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/02-1.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/02-2.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/02-3.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/02-4.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/03-1.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/03-2.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/03-3.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/04-1.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/04-2.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/04-3.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/04-4.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/04-5.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/04-6.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/04-7.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-1.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-2.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-3.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-4.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-5.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-6.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-7.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-8.png">
<meta property="og:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/05-9.png">
<meta property="og:updated_time" content="2017-07-09T10:16:43.068Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CSS技巧（三）：视觉效果">
<meta name="twitter:description" content="《css揭秘》学习笔记系列，记录和分享各种实用技巧，共同进步。源代码可访问仓库地址 视觉效果1. 单侧投影1.1 单侧投影大多数人使用box-shadow的方法是，制定三个长度和一个颜色值。 1box-shadow: 2px 3px 4px rgba(0, 0, 0, .5);   box-shadow第一个长度表示水平方向投影，第二个为垂直方向投影，第三个为模糊半径。  投影绘制步骤：  以该元">
<meta name="twitter:image" content="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/01-1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '6381005558069069000',
      author: 'Xuthus'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/"/>





  <title> CSS技巧（三）：视觉效果 | Xu•thus Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Xu•thus Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">我的成长之路</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/01/css-secrets03-Visual-Effects/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Xuthus">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xu•thus Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xu•thus Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                CSS技巧（三）：视觉效果
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-01T18:09:44+08:00">
                2017-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端技术/" itemprop="url" rel="index">
                    <span itemprop="name">前端技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          
             <span id="/2017/04/01/css-secrets03-Visual-Effects/" class="leancloud_visitors" data-flag-title="CSS技巧（三）：视觉效果">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>《css揭秘》学习笔记系列，记录和分享各种实用技巧，共同进步。源代码可访问<a href="https://github.com/xxxgitone/CSS_Skills" target="_blank" rel="external">仓库地址</a></p>
<h1 id="视觉效果"><a href="#视觉效果" class="headerlink" title="视觉效果"></a>视觉效果</h1><h3 id="1-单侧投影"><a href="#1-单侧投影" class="headerlink" title="1. 单侧投影"></a>1. 单侧投影</h3><h4 id="1-1-单侧投影"><a href="#1-1-单侧投影" class="headerlink" title="1.1 单侧投影"></a>1.1 单侧投影</h4><p>大多数人使用box-shadow的方法是，制定三个长度和一个颜色值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">box-shadow</span>: 2<span class="selector-tag">px</span> 3<span class="selector-tag">px</span> 4<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0, 0, 0, <span class="selector-class">.5</span>);</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/01-1.png" alt="01-1.png" title="">
<blockquote>
<p>box-shadow第一个长度表示水平方向投影，第二个为垂直方向投影，第三个为模糊半径。</p>
</blockquote>
<p>投影绘制步骤：</p>
<ul>
<li>以该元素的尺寸和位置画一个<code>rgba（0,0,0，.5）</code>的矩形</li>
<li>把它向右移<code>2px</code>，向下移3px</li>
<li>使用高斯模糊算法将它进行4px的模糊处理。这在本质上表示在阴影边缘发生阴影色和纯透明色之间的颜色过度长度近似模糊半径的两倍（这里为8px）</li>
<li>接下来，模糊后的矩形与原始元素的交集部分会被剪切掉，因此看起来像是在该元素后面。所以这里跟我们所理解的元素叠在模糊后矩形上层不同。所以说如果我们给元素设置一层半透明的背景，就看不到任何投影</li>
</ul>
<p>使用<code>4px</code>的模糊半径意味着投影的尺寸会比元素本身的尺寸大约8px，因此投影的最外圈会从元素的四面向外显露出来。</p>
<ul>
<li><p>设置偏移量，就可以把投影的顶部和左边隐藏起来，只要这两个方向上的偏移量不小于4px就行，不够会导致外漏的投影过于浓重</p>
</li>
<li><p>最终解决方案是使用<code>box-shadow</code>的第四个长度参数，排在模糊半径参数之后，称作扩张半径。这个参数会根据你指定的值去扩张或缩小（负值）投影的尺寸。比如一个-5px的扩张半径会把投影宽度和高度各减少10px（每边5px）</p>
</li>
</ul>
<p>所以我们使用一个负的扩张半径，而他的值正好等于模糊半径</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">box-shadow</span>: 0 5<span class="selector-tag">px</span> 4<span class="selector-tag">px</span> <span class="selector-tag">-4px</span> <span class="selector-tag">black</span>;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/01-2.png" alt="01-2.png" title="">
<p>现在只有底部才有一道投影了。</p>
<h4 id="1-2-邻边投影"><a href="#1-2-邻边投影" class="headerlink" title="1.2 邻边投影"></a>1.2 邻边投影</h4><p>可以使用之前说的设置偏移量，要么使用设置第四个长度参数</p>
<ul>
<li>我们不应该把阴影缩的太小，而是把阴影藏进一侧，另一侧自然露出就好，因此，扩张半径不应该设为模糊半径的相反值，而是这个相反值的一半</li>
<li>需要指定两个偏移量，因为希望投影在水平和垂直方向上同时移动。它们的值需要大于或等于模糊半径的一半</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">box-shadow</span>: 3<span class="selector-tag">px</span> 3<span class="selector-tag">px</span> 6<span class="selector-tag">px</span> <span class="selector-tag">-3px</span> <span class="selector-tag">black</span>;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/01-3.png" alt="01-3.png" title="">
<h4 id="1-3-双侧投影"><a href="#1-3-双侧投影" class="headerlink" title="1.3 双侧投影"></a>1.3 双侧投影</h4><p>用上面的单侧投影（每边个一块）来达到目的。基本上就是把”单侧投影”中的技巧运用两次</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">box-shadow</span>: 5<span class="selector-tag">px</span> 0 5<span class="selector-tag">px</span> <span class="selector-tag">-5px</span> <span class="selector-tag">black</span>,</div><div class="line">                <span class="selector-tag">-5px</span> 0 5<span class="selector-tag">px</span> <span class="selector-tag">-5px</span> <span class="selector-tag">black</span>;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/01-4.png" alt="01-4.png" title="">
<h3 id="2-不规则投影"><a href="#2-不规则投影" class="headerlink" title="2. 不规则投影"></a>2. 不规则投影</h3><p>当元素添加了伪元素或半透明背景的时候，box-shadow会变得力不从心，出现一些问题，有些原理之前已经讲到过。</p>
<p>对下面三种情况的元素都使用了<code>box-shadow: .1em .1em .3em rgba(0, 0, 0, .5);</code></p>
<p>比如，用伪元素生成气泡的小尾巴后，再对气泡使用投影，投影效果不会在小尾巴上显现。</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/02-1.png" alt="02-1.png" title="">
<p>对元素使用了透明背景，投影会忽视透明部分。</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/02-2.png" alt="02-2.png" title="">
<p>切角效果</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/02-3.png" alt="02-3.png" title="">
<p>等等。</p>
<p>使用filter属性来解决，目前为止IE11还不支持，其他基本支持。filter实行从SVG借鉴过来的。我们使用其中一个函数<code>drop-down()</code>，跟<code>box-shadow</code>很相像，但不包括扩张半径和<code>inset</code>值。</p>
<p>可以这样改写</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">drop-shadow</span>(<span class="selector-class">.1em</span> <span class="selector-class">.1em</span> <span class="selector-class">.1em</span> <span class="selector-tag">rgba</span>(0,0,0,<span class="selector-class">.5</span>));</div></pre></td></tr></table></figure>
<p>最终效果</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/02-4.png" alt="02-4.png" title="">
<h3 id="3-染色效果"><a href="#3-染色效果" class="headerlink" title="3. 染色效果"></a>3. 染色效果</h3><p>使用<code>&lt;canvas&gt;</code>也可以实现，这里探讨css方法的实现。</p>
<h4 id="3-1-基于滤镜的方案"><a href="#3-1-基于滤镜的方案" class="headerlink" title="3.1 基于滤镜的方案"></a>3.1 基于滤镜的方案</h4><p>由于没有一种现成的滤镜是专门为这个效果而设计的，所以需要使用多个滤镜组合起来。</p>
<p>第一个滤镜是<code>sepia()</code>,它会给图片增加一种饱和度的橙黄色染色效果，几乎所有的色相值都被收敛在35~40之间。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">sepia</span>();</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/03-1.png" alt="03-1.png" title="">
<p>如果想要主色调的饱和度比这个高，可以用<code>staturate()</code>l滤镜来给每个像素提升饱和度。具体多少可以根据实际情况。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">sepia</span>() <span class="selector-tag">saturate</span>(4);</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/03-2.png" alt="03-2.png" title="">
<p>但是我们想要一种亮粉色的，则还需要再添加一个<code>hue-rotate()</code>滤镜，把每个像素的色相以指定的度数进行偏移。为了把原来的色相值40提升至335，需要增大（335 - 40）= 295度</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">sepia</span>() <span class="selector-tag">saturate</span>(4) <span class="selector-tag">hue-rotate</span>(295<span class="selector-tag">deg</span>);</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/03-3.png" alt="03-3.png" title="">
<p>添加一个hover来触发切换</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">img</span> &#123;</div><div class="line">	<span class="attribute">max-width</span>: <span class="number">250px</span>;</div><div class="line">	<span class="attribute">filter</span>: <span class="built_in">sepia</span>() <span class="built_in">saturate</span>(4) <span class="built_in">hue-rotate</span>(295deg);</div><div class="line">	<span class="attribute">transition</span>: <span class="number">1s</span> filter;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span>,<span class="selector-tag">img</span><span class="selector-pseudo">:focus</span> &#123;</div><div class="line">	<span class="attribute">filter</span>:none</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-2-基于混合模式的方案"><a href="#3-2-基于混合模式的方案" class="headerlink" title="3.2 基于混合模式的方案"></a>3.2 基于混合模式的方案</h4><p>当两个元素叠加时，“混合模式”控制了上层元素的颜色与下层颜色进行混合的方式。用它来实现染色效果，需要用到的混合模式是<code>luminosity</code>，这种模式会保留上层元素的HSL亮度信息，并从它的下层吸取色相的饱和度信息。所以如果我们将主色调放在下层，待处理的图片放在上层，就相当于进行染色了。当然IE11肯定是不支持的</p>
<p>对一个元素设置混合模式，有两个属性可以用：<code>mix-blend-mode</code>可以为整个元素设置混合模式，<code>background-blend-mode</code>可以为每层背景单独指定混合模式。所以有两种选择</p>
<ul>
<li>需要把图片包裹在一个容器中，并把容器的背景设置为我们想要的主色调</li>
<li>不用图片元素，而用div元素，把这个元素的第一层背景设置为要染色的图片第二层的背景设置为我们想要的主色调</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"dog.jpg"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>几行声明就可以解决</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">a</span> &#123;</div><div class="line">		<span class="attribute">display</span>: block;</div><div class="line">		<span class="attribute">max-width</span>: <span class="number">250px</span>;</div><div class="line">		<span class="attribute">background</span>: <span class="built_in">hsl</span>(335, 100%, 50%);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="selector-tag">img</span> &#123;</div><div class="line">		<span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">		<span class="attribute">mix-blend-mode</span>: luminosity;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p><code>mix-blend-mode</code>是把整个元素向下进行混合，而不管下面是什么。因此只要把这个属性设置为<code>luminosity</code>混合模式，那图片总会跟某些东西进行混合。此外，使用<code>background-blend-mode</code>属性则可以让每层背景跟它的下层背景进行混合，但不关心元素之外是什么情况。所以，当我们只有一个背景图像以及一个透明的背景色时，就不会出现任何混合效果。利用此特点可以制作动画</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"dog"</span> <span class="attr">style</span>=<span class="string">"background-image: url('dog.jpg')"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.dog</span> &#123;</div><div class="line">		<span class="attribute">width</span>: <span class="number">640px</span>; <span class="attribute">height</span>: <span class="number">440px</span>;</div><div class="line">		<span class="attribute">background-size</span>: cover;</div><div class="line">		<span class="attribute">background-color</span>: <span class="built_in">hsl</span>(335, 100%, 50%);</div><div class="line">		<span class="attribute">background-blend-mode</span>: luminosity;</div><div class="line">		<span class="attribute">transition</span>: .<span class="number">5s</span> background-color;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="selector-class">.dog</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">		<span class="attribute">background-color</span>: transparent;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>两种方法都不够理想</p>
<ul>
<li>图片的尺寸需要在css中写死</li>
<li>在语义上，这个元素不是一张图片</li>
</ul>
<h3 id="4-毛玻璃效果"><a href="#4-毛玻璃效果" class="headerlink" title="4. 毛玻璃效果"></a>4. 毛玻璃效果</h3><p>使用半透明颜色作为背景，然后将其放在图片或花哨的背景之上，会产生不错的效果。不过也可能导致文字很难阅读。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">blockquote</span>&gt;</span></div><div class="line">		“The only way to get rid of a temptation is to yield to it. Resist it, and your soul grows sick with longing for the things it has forbidden to itself, with desire for what its monstrous laws have made monstrous and unlawful.”</div><div class="line">		<span class="tag">&lt;<span class="name">footer</span>&gt;</span>- </div><div class="line">			<span class="tag">&lt;<span class="name">cite</span>&gt;</span>Oscar Wilde, The Picture of Dorian Gray<span class="tag">&lt;/<span class="name">cite</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></div></pre></td></tr></table></figure>
<p>关键css代码可能是</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">		<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"http://csssecrets.io/images/tiger.jpg"</span>) <span class="number">0</span> / cover fixed;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">main</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">hsla</span>(0,0%,100%,.25) border-box;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最后效果</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/04-1.png" alt="04-1.png" title="">
<p>上面的<code>fixed</code>表示<code>background-attachment:fixed</code>,设置背景图像固定，不会随着页面的其余部分滚动。</p>
<p>效果图文字有些难以看清，背景图过于花哨。可以通过提升背景色的不透明度来则增加文本的可读性，不过效果就那么生动。下面的图是将不透明度调整为.5，一点都不好看。</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/04-2.png" alt="04-2.png" title="">
<p>解决这个问题的方案通常是将覆盖的那部分图片区做模糊处理。在css中可以使用滤镜，blur()对元素进行模糊处理。</p>
<p>不过直接处理也不行，会导致文字无法阅读。需要另找办法</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/04-3.png" alt="04-3.png" title="">
<p>由于不能直接对元素本生进行模糊处理，可以选择对一个伪元素进行处理，然乎将它定位到元素下层。</p>
<p>下面是主要代码</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">main</span> &#123;</div><div class="line">	<span class="attribute">position</span>: relative;</div><div class="line">	</div><div class="line">	<span class="comment">/*其他样式*/</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">body</span>,<span class="selector-tag">main</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"http://csssecrets.io/images/tiger.jpg"</span>) <span class="number">0</span> / cover fixed;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">main</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">		<span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">		<span class="attribute">position</span>: absolute;</div><div class="line">		<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;<span class="attribute">bottom</span>: <span class="number">0</span>;<span class="attribute">left</span>: <span class="number">0</span>; <span class="comment">/*设置全部偏移量为0，可以将它完整覆盖在宿主元素上*/</span></div><div class="line">		<span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">		<span class="attribute">filter</span>: <span class="built_in">blur</span>(20px);</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/04-4.png" alt="04-4.png" title="">
<p>将伪元素的背景图设置成body的一致，<code>z-index: -1</code>是将它置于<code>main</code>元素之下，然后对伪元素惊醒模糊处理。</p>
<p>大部分效果可以出来了，不过仔细可以看出来，模糊效果在接近边缘处会逐渐消退。因为模糊效果会削减实色像素所能覆盖的范围，削减的半径正是模糊半径的长度。可以对伪元素设置成红色背景，方便看清真像。</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/04-5.png" alt="04-5.png" title="">
<p>可以让伪元素相对其宿主元素的尺寸再向外扩大至少<code>20px</code>(即模糊半径)，可以通过<code>-20px</code>的外变局来实现。保险起见，用一个更大的绝对值<code>（-30px）</code>.</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/04-6.png" alt="04-6.png" title="">
<p>但是周边又出现一圈模糊效果，因为超出了容器，使用<code>hidden</code>即可</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> <span class="selector-tag">main</span> &#123;</div><div class="line">	 <span class="attribute">position</span>: relative；</div><div class="line">	overflow: hidden;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">hsla</span>(0,0%,100%,.3) border-box;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">body</span>,<span class="selector-tag">main</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"http://csssecrets.io/images/tiger.jpg"</span>) <span class="number">0</span> / cover fixed;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">main</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">	<span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">	<span class="attribute">position</span>: absolute;</div><div class="line">	<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;<span class="attribute">bottom</span>: <span class="number">0</span>;<span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">	<span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">	<span class="attribute">filter</span>: <span class="built_in">blur</span>(20px);</div><div class="line">	<span class="attribute">margin</span>: -<span class="number">30px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/04-7.png" alt="04-7.png" title="">
<p>现在毛玻璃效果完美了。</p>
<h3 id="5-折角效果"><a href="#5-折角效果" class="headerlink" title="5. 折角效果"></a>5. 折角效果</h3><blockquote>
<p>背景知识：css变形，css渐变、切角效果</p>
</blockquote>
<h4 id="5-1-45°折角"><a href="#5-1-45°折角" class="headerlink" title="5.1 45°折角"></a>5.1 45°折角</h4><p>第一步实现一个切角效果</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">		<span class="attribute">background</span>: <span class="number">#58a</span>;</div><div class="line">		<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-135deg, transparent 2em, #58a 0);</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-1.png" alt="05-1.png" title="">
<p>然后增加一个暗色的三角形来实现翻折效果。实现方法就是增加一层渐变来生成这个三角形并将其定位在右上角，可以通过<code>background-size</code>来控制折角的大小。折页部分三角形放在切角渐变之上。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#58a</span>;</div><div class="line">				<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to left bottom, </div><div class="line">					transparent 50%, rgba(0, 0%, 0, .4) <span class="number">0</span>) no-repeat <span class="number">100%</span> <span class="number">0</span> / <span class="number">2em</span> <span class="number">2em</span>,</div><div class="line">				   <span class="built_in">linear-gradient</span>(-135deg, transparent 2em, #58a 0);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-2.png" alt="05-2.png" title="">
<p>并没有达到我们想要的效果，原因跟（二）中切角效果一样，第二层渐变中的<code>2em</code>折角尺寸是写在色标中的，因此是沿着渐变轴进行度量的，是对角线尺寸。然而在<code>background-size</code>中的<code>2em</code>长度是背景贴片的宽度和高，是在水平和垂直方向上度量的。</p>
<p>有两种方式调整：</p>
<ul>
<li>保留对角线的<code>2em</code>长度，将<code>background-size</code>乘以<code>根号2</code></li>
<li>保留水平和垂直方向上的<code>2em</code>，就要切角渐变的角标位置值除以<code>根号2</code></li>
</ul>
<p>但是推荐使用第二种方式，绝大多数的css度量都不是在对角线上的。所以色标的位置值为<code>2</code>除以<code>根号2</code>等于<code>根号2</code>，约等于<code>1.414</code>。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#58a</span>;</div><div class="line">				<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to left bottom, </div><div class="line">					transparent 50%, rgba(0, 0%, 0, .4) <span class="number">0</span>) no-repeat <span class="number">100%</span> <span class="number">0</span> / <span class="number">2em</span> <span class="number">2em</span>,</div><div class="line">				   <span class="built_in">linear-gradient</span>(-135deg, transparent 1.5em, #58a 0);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-3.png" alt="05-3.png" title="">
<h4 id="5-2-其他角度"><a href="#5-2-其他角度" class="headerlink" title="5.2 其他角度"></a>5.2 其他角度</h4><p>45度角的折角不是很常用，可以改变折角角度，比如-150deg可以产生30度的切角，但也意味着计算折角三角形的边长也要复杂点了。</p>
<p>使用三角函数计算边长，折角三角形为30-60-90的直角三角形，所以</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-4.png" alt="05-4.png" title="">
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">background: #58a;</div><div class="line">background: linear-gradient(to left bottom, </div><div class="line">	transparent 50%, rgba(0, 0, 0, .4) 0) no-repeat 100% 0 / 3em 1.73em,</div><div class="line">   linear-gradient(-150deg, transparent 1.414em, #58a 0);</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-5.png" alt="05-5.png" title="">
<p>这个折角并不真实，拿纸折一下就可以看出来了。</p>
<p>这个折角三角形需要旋转，但是背景不能旋转，可以使用伪元素。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span> &#123;</div><div class="line">	<span class="attribute">position</span>: relative;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#58a</span>;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-150deg, transparent 1.414em, #58a 0);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">	<span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">	<span class="attribute">position</span>: absolute;</div><div class="line">	<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to left bottom, </div><div class="line">		transparent 50%, rgba(0, 0, 0, .4) <span class="number">0</span>) no-repeat <span class="number">100%</span> <span class="number">0</span> / <span class="number">3em</span> <span class="number">1.73em</span>;</div><div class="line">	<span class="attribute">width</span>: <span class="number">3em</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">1.7em</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>实现了跟上面相同的效果，然后旋转</p>
<p>下一步将把折页三角形的宽高对调，以此改变它 的方向，然后再逆时针30来旋转这个折页三角形。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">height</span>: 1<span class="selector-class">.73em</span>;</div><div class="line"><span class="selector-tag">width</span>: 3<span class="selector-tag">em</span>;</div><div class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">rotate</span>(<span class="selector-tag">-30deg</span>);</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-6.png" alt="05-6.png" title="">
<p>为了平移简单，将<code>transform-origin</code>设置为<code>bottom right</code>即三角形的右下角成为旋转的中心</p>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-7.png" alt="05-7.png" title="">
<p>通过图和上面数据可知，垂直偏量为x - y = 3 - √3 = 1.3.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">		<span class="comment">/*其他样式*/</span></div><div class="line">		<span class="attribute">transform</span>:  <span class="built_in">translateY</span>(-1.3em) <span class="built_in">rotate</span>(-30deg);</div><div class="line">		<span class="attribute">transform-origin</span>: bottom right;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-8.png" alt="05-8.png" title="">
<p>为了更真实一点，增加圆角，渐变以及投影。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">  <span class="selector-tag">div</span> &#123;</div><div class="line">	<span class="attribute">position</span>: relative;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#58a</span>;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-150deg, transparent 1.414em, #58a 0);</div><div class="line">	<span class="attribute">border-radius</span>: .<span class="number">5em</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::before</span> &#123;</div><div class="line">	<span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">	<span class="attribute">position</span>: absolute;</div><div class="line">	<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">	<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to left bottom, </div><div class="line">		transparent 50%, rgba(0, 0, 0, .2) <span class="number">0</span>, <span class="built_in">rgba</span>(0, 0, 0, .4)) no-repeat <span class="number">100%</span> <span class="number">0</span>;</div><div class="line">	<span class="attribute">width</span>: <span class="number">1.73em</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">3em</span>;</div><div class="line">	<span class="attribute">transform</span>:  <span class="built_in">translateY</span>(-1.3em) <span class="built_in">rotate</span>(-30deg);</div><div class="line">	<span class="attribute">transform-origin</span>: bottom right;</div><div class="line">	<span class="attribute">border-bottom-left-radius</span>: inherit;</div><div class="line">	<span class="attribute">box-shadow</span>: -.<span class="number">2em</span> .<span class="number">2em</span> .<span class="number">3em</span> -.<span class="number">1em</span> <span class="built_in">rgba</span>(0, 0, 0, .15);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<img src="/2017/04/01/css-secrets03-Visual-Effects/05-9.png" alt="05-9.png" title="">
<p>为了方便复，可以使用scss</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">mixin</span> folded-corner(<span class="variable">$bg</span>, <span class="variable">$size</span>, <span class="variable">$angle</span>:<span class="number">30deg</span>)&#123;</div><div class="line"></div><div class="line">	<span class="attribute">position</span>: relative;</div><div class="line">	<span class="attribute">background</span>: <span class="variable">$bg</span>;</div><div class="line">	<span class="attribute">background</span>: linear-gradient(<span class="variable">$angle</span> - <span class="number">180deg</span>, transparent <span class="variable">$size</span>, <span class="variable">$bg</span> <span class="number">0</span>);</div><div class="line">	<span class="attribute">border-radius</span>: .<span class="number">5em</span>;</div><div class="line"></div><div class="line">	<span class="variable">$x</span>: <span class="variable">$size</span> / sin(<span class="variable">$angle</span>);</div><div class="line">	<span class="variable">$y</span>: <span class="variable">$size</span> / cos(<span class="variable">$angle</span>);</div><div class="line"></div><div class="line">	&amp;::before &#123;</div><div class="line">			<span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">			<span class="attribute">position</span>: absolute;</div><div class="line">			<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">			<span class="attribute">background</span>: linear-gradient(to left bottom, </div><div class="line">				transparent <span class="number">50%</span>, rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">2</span>) <span class="number">0</span>, rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">4</span>)) no-repeat <span class="number">100%</span> <span class="number">0</span>;</div><div class="line">			<span class="attribute">width</span>: <span class="variable">$y</span></div><div class="line">			height: <span class="variable">$x</span>;</div><div class="line">			<span class="attribute">transform</span>:  translateY(<span class="variable">$y</span> - <span class="variable">$x</span>) rotate(<span class="number">2</span>*<span class="variable">$angle</span> - <span class="number">90deg</span>);</div><div class="line">			<span class="attribute">transform-origin</span>: bottom right;</div><div class="line">			<span class="attribute">border-bottom-left-radius</span>: inherit;</div><div class="line">			<span class="attribute">box-shadow</span>: -.<span class="number">2em</span> .<span class="number">2em</span> .<span class="number">3em</span> -.<span class="number">1em</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">2</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/CSS/" rel="tag"># CSS</a>
          
            <a href="/tags/CSS3/" rel="tag"># CSS3</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/27/shape/" rel="next" title="CSS技巧（二）：形状">
                <i class="fa fa-chevron-left"></i> CSS技巧（二）：形状
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/05/02/imgzoom插件/" rel="prev" title="新手怎么检测自己的javascript能力？从写一个小插件开始">
                新手怎么检测自己的javascript能力？从写一个小插件开始 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Xuthus" />
          <p class="site-author-name" itemprop="name">Xuthus</p>
          <p class="site-description motion-element" itemprop="description">多敲代码，少睡觉</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/xxxgitone" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/xxxjiang/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#视觉效果"><span class="nav-number">1.</span> <span class="nav-text">视觉效果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-单侧投影"><span class="nav-number">1.0.1.</span> <span class="nav-text">1. 单侧投影</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-单侧投影"><span class="nav-number">1.0.1.1.</span> <span class="nav-text">1.1 单侧投影</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-邻边投影"><span class="nav-number">1.0.1.2.</span> <span class="nav-text">1.2 邻边投影</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-双侧投影"><span class="nav-number">1.0.1.3.</span> <span class="nav-text">1.3 双侧投影</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-不规则投影"><span class="nav-number">1.0.2.</span> <span class="nav-text">2. 不规则投影</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-染色效果"><span class="nav-number">1.0.3.</span> <span class="nav-text">3. 染色效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-基于滤镜的方案"><span class="nav-number">1.0.3.1.</span> <span class="nav-text">3.1 基于滤镜的方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-基于混合模式的方案"><span class="nav-number">1.0.3.2.</span> <span class="nav-text">3.2 基于混合模式的方案</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-毛玻璃效果"><span class="nav-number">1.0.4.</span> <span class="nav-text">4. 毛玻璃效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-折角效果"><span class="nav-number">1.0.5.</span> <span class="nav-text">5. 折角效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-45°折角"><span class="nav-number">1.0.5.1.</span> <span class="nav-text">5.1 45°折角</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-其他角度"><span class="nav-number">1.0.5.2.</span> <span class="nav-text">5.2 其他角度</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xuthus</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script>
      <!-- UY END -->
  




  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("7H8n4Cnhy3aANup4N629ffkS-gzGzoHsz", "HNELwKjh6eJMcVJnAzrodRnm");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
